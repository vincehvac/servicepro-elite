<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServicePro Elite - Complete Field Service Management</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: white; border-radius: 15px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .logo { font-size: 32px; font-weight: bold; color: #667eea; margin-bottom: 10px; }
        .tagline { color: #666; font-size: 18px; }
        .nav-bar { background: white; border-radius: 15px; padding: 15px 30px; margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .nav-bar a { color: #667eea; text-decoration: none; padding: 10px 20px; margin: 0 10px; border-radius: 8px; transition: background 0.3s; }
        .nav-bar a:hover { background: #f8f9fa; }
        .nav-bar a.active { background: #667eea; color: white; }
        .content { display: none; }
        .content.active { display: block; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .stat { background: white; padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .stat-number { font-size: 32px; font-weight: bold; color: #667eea; }
        .stat-label { color: #666; font-size: 14px; }
        .action-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0; }
        .action-card { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .action-card:hover { transform: translateY(-5px); }
        .action-card h3 { color: #667eea; margin-bottom: 15px; font-size: 20px; }
        .action-card p { color: #666; line-height: 1.6; margin-bottom: 20px; }
        .btn { background: #667eea; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 5px; transition: background 0.3s; }
        .btn:hover { background: #764ba2; }
        .btn-secondary { background: #6c757d; }
        .btn-success { background: #28a745; }
        .table { width: 100%; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .table th { background: #667eea; color: white; padding: 15px; text-align: left; }
        .table td { padding: 15px; border-bottom: 1px solid #e1e5e9; }
        .table tr:last-child td { border-bottom: none; }
        .form-group { margin: 15px 0; }
        .form-group label { display: block; margin-bottom: 5px; color: #333; font-weight: 500; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #667eea; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 30px; border-radius: 15px; width: 90%; max-width: 600px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { color: #000; }
        .alert { padding: 15px; border-radius: 8px; margin: 15px 0; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status-badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .status-active { background: #28a745; color: white; }
        .status-pending { background: #ffc107; color: #212529; }
        .status-completed { background: #17a2b8; color: white; }
        .status-cancelled { background: #dc3545; color: white; }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ServicePro Elite</div>
            <div class="tagline">Complete Field Service Management Platform</div>
        </div>

        <nav class="nav-bar">
            <a href="#" class="active" onclick="showSection('dashboard')">üìä Dashboard</a>
            <a href="#" onclick="showSection('customers')">üë• Customers</a>
            <a href="#" onclick="showSection('jobs')">üîß Jobs</a>
            <a href="#" onclick="showSection('scheduling')">üìÖ Scheduling</a>
            <a href="#" onclick="showSection('inventory')">üì¶ Inventory</a>
            <a href="#" onclick="showSection('invoices')">üí∞ Invoices</a>
            <a href="#" onclick="showSection('calculator')">üîß HVAC Calculator</a>
            <a href="#" onclick="showSection('reports')">üìà Reports</a>
        </nav>

        <!-- Dashboard -->
        <div id="dashboard" class="content active">
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="total-customers">1,247</div>
                    <div class="stat-label">Total Customers</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="active-jobs">23</div>
                    <div class="stat-label">Active Jobs</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="monthly-revenue">$87,540</div>
                    <div class="stat-label">Monthly Revenue</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="satisfaction-rate">98%</div>
                    <div class="stat-label">Satisfaction Rate</div>
                </div>
            </div>

            <div class="action-grid">
                <div class="action-card">
                    <h3>üö® Today's Schedule</h3>
                    <div id="today-schedule"></div>
                    <button class="btn" onclick="showSection('scheduling')">View Full Schedule</button>
                </div>
                <div class="action-card">
                    <h3>üîß Recent Jobs</h3>
                    <div id="recent-jobs"></div>
                    <button class="btn" onclick="showSection('jobs')">View All Jobs</button>
                </div>
                <div class="action-card">
                    <h3>üë• New Customers</h3>
                    <div id="new-customers"></div>
                    <button class="btn" onclick="showSection('customers')">View All Customers</button>
                </div>
            </div>
        </div>

        <!-- Customers Management -->
        <div id="customers" class="content">
            <h2>üë• Customer Management</h2>
            <button class="btn btn-success" onclick="showAddCustomerModal()">‚ûï Add New Customer</button>
            <button class="btn btn-secondary" onclick="exportCustomers()">üì§ Export</button>
            
            <div class="table" style="margin-top: 20px;">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>Equipment</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="customers-table"></tbody>
                </table>
            </div>
        </div>

        <!-- Jobs Management -->
        <div id="jobs" class="content">
            <h2>üîß Job Management</h2>
            <button class="btn btn-success" onclick="showAddJobModal()">‚ûï Add New Job</button>
            <button class="btn btn-secondary" onclick="exportJobs()">üì§ Export</button>
            
            <div style="margin: 20px 0;">
                <label>Filter by Status:</label>
                <select id="job-filter" onchange="filterJobs()">
                    <option value="all">All Jobs</option>
                    <option value="scheduled">Scheduled</option>
                    <option value="in-progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                </select>
            </div>

            <div class="table">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>Job ID</th>
                            <th>Customer</th>
                            <th>Service Type</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="jobs-table"></tbody>
                </table>
            </div>
        </div>

        <!-- Scheduling -->
        <div id="scheduling" class="content">
            <h2>üìÖ Scheduling & Dispatch</h2>
            <div class="action-grid">
                <div class="action-card">
                    <h3>üìã Today's Schedule</h3>
                    <div id="today-appointments"></div>
                </div>
                <div class="action-card">
                    <h3>üìÖ This Week</h3>
                    <div id="week-appointments"></div>
                </div>
                <div class="action-card">
                    <h3>üîß Available Technicians</h3>
                    <div id="available-techs"></div>
                </div>
            </div>
            <button class="btn btn-success" onclick="showScheduleModal()">‚ûï Schedule New Appointment</button>
        </div>

        <!-- Inventory -->
        <div id="inventory" class="content">
            <h2>üì¶ Inventory Management</h2>
            <button class="btn btn-success" onclick="showAddInventoryModal()">‚ûï Add Item</button>
            <button class="btn btn-secondary" onclick="exportInventory()">üì§ Export</button>
            
            <div style="margin: 20px 0;">
                <label>Filter by Category:</label>
                <select id="inventory-filter" onchange="filterInventory()">
                    <option value="all">All Items</option>
                    <option value="refrigerant">Refrigerant</option>
                    <option value="parts">Parts</option>
                    <option value="tools">Tools</option>
                    <option value="consumables">Consumables</option>
                </select>
            </div>

            <div class="table">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>SKU</th>
                            <th>Category</th>
                            <th>Quantity</th>
                            <th>Min Level</th>
                            <th>Price</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-table"></tbody>
                </table>
            </div>
        </div>

        <!-- Invoices -->
        <div id="invoices" class="content">
            <h2>üí∞ Invoicing & Payments</h2>
            <button class="btn btn-success" onclick="showCreateInvoiceModal()">‚ûï Create Invoice</button>
            <button class="btn btn-secondary" onclick="exportInvoices()">üì§ Export</button>
            
            <div style="margin: 20px 0;">
                <label>Filter by Status:</label>
                <select id="invoice-filter" onchange="filterInvoices()">
                    <option value="all">All Invoices</option>
                    <option value="draft">Draft</option>
                    <option value="sent">Sent</option>
                    <option value="paid">Paid</option>
                    <option value="overdue">Overdue</option>
                </select>
            </div>

            <div class="table">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>Invoice #</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="invoices-table"></tbody>
                </table>
            </div>
        </div>

        <!-- HVAC Calculator -->
        <div id="calculator" class="content">
            <h2>üîß HVAC Calculator Suite</h2>
            <p>Professional-grade tools for HVAC technicians - 100% offline capable</p>
            
            <div style="text-align: center; margin: 30px 0;">
                <a href="hvac-calculator.html" class="btn" style="font-size: 18px; padding: 15px 30px;">
                    üöÄ Launch Complete HVAC Calculator
                </a>
            </div>

            <div class="action-grid">
                <div class="action-card">
                    <h3>‚ùÑÔ∏è Refrigeration</h3>
                    <p>Superheat, subcooling, charge analysis</p>
                    <button class="btn" onclick="quickCalc('refrigeration')">Quick Calc</button>
                </div>
                <div class="action-card">
                    <h3>üå™Ô∏è Airflow</h3>
                    <p>Temperature split, CFM estimation</p>
                    <button class="btn" onclick="quickCalc('airflow')">Quick Calc</button>
                </div>
                <div class="action-card">
                    <h3>‚ö° Electrical</h3>
                    <p>Amp draw, capacitor testing</p>
                    <button class="btn" onclick="quickCalc('electrical')">Quick Calc</button>
                </div>
                <div class="action-card">
                    <h3>üìè Duct Sizing</h3>
                    <p>Velocity, friction loss</p>
                    <button class="btn" onclick="quickCalc('duct')">Quick Calc</button>
                </div>
            </div>
        </div>

        <!-- Reports -->
        <div id="reports" class="content">
            <h2>üìà Reports & Analytics</h2>
            <div class="action-grid">
                <div class="action-card">
                    <h3>üí∞ Revenue Report</h3>
                    <p>Monthly revenue trends and analysis</p>
                    <button class="btn" onclick="generateReport('revenue')">Generate</button>
                </div>
                <div class="action-card">
                    <h3>üìä Job Performance</h3>
                    <p>Job completion rates and efficiency</p>
                    <button class="btn" onclick="generateReport('jobs')">Generate</button>
                </div>
                <div class="action-card">
                    <h3>üë• Customer Analysis</h3>
                    <p>Customer retention and growth</p>
                    <button class="btn" onclick="generateReport('customers')">Generate</button>
                </div>
                <div class="action-card">
                    <h3>‚ö° Technician Performance</h3>
                    <p>Technician efficiency and ratings</p>
                    <button class="btn" onclick="generateReport('technicians')">Generate</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // ServicePro Elite - Complete Application JavaScript
        // Full working application with all features

        // Sample Data
        let customers = [
            { id: 1, name: "John Smith", email: "john@email.com", phone: "555-0101", address: "123 Main St", equipment: "AC Unit Model X", lastService: "2024-10-01" },
            { id: 2, name: "Jane Doe", email: "jane@email.com", phone: "555-0102", address: "456 Oak Ave", equipment: "Furnace Model Y", lastService: "2024-09-15" },
            { id: 3, name: "Bob Johnson", email: "bob@email.com", phone: "555-0103", address: "789 Pine Rd", equipment: "Heat Pump Model Z", lastService: "2024-08-20" }
        ];

        let jobs = [
            { id: 1, customer: "John Smith", serviceType: "AC Repair", date: "2024-10-15", status: "scheduled", amount: 250, technician: "Mike" },
            { id: 2, customer: "Jane Doe", serviceType: "Furnace Maintenance", date: "2024-10-14", status: "completed", amount: 150, technician: "Sarah" },
            { id: 3, customer: "Bob Johnson", serviceType: "Heat Pump Installation", date: "2024-10-13", status: "in-progress", amount: 3500, technician: "Tom" }
        ];

        let inventory = [
            { id: 1, name: "R-410A Refrigerant", sku: "R410A-25", category: "refrigerant", quantity: 50, minLevel: 10, price: 150, status: "good" },
            { id: 2, name: "AC Filter 20x25", sku: "FILTER-2025", category: "consumables", quantity: 25, minLevel: 15, price: 25, status: "good" },
            { id: 3, name: "Compressor 3-Ton", sku: "COMP-3TON", category: "parts", quantity: 3, minLevel: 2, price: 800, status: "low" }
        ];

        let invoices = [
            { id: 1, customer: "John Smith", date: "2024-10-10", amount: 250, status: "paid" },
            { id: 2, customer: "Jane Doe", date: "2024-10-12", amount: 150, status: "sent" },
            { id: 3, customer: "Bob Johnson", date: "2024-10-13", amount: 3500, status: "draft" }
        ];

        // Navigation
        function showSection(section) {
            // Hide all content sections
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-bar a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(section).classList.add('active');
            
            // Add active class to clicked link
            event.target.classList.add('active');
            
            // Load section data
            loadSectionData(section);
        }

        function loadSectionData(section) {
            switch(section) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'customers':
                    loadCustomers();
                    break;
                case 'jobs':
                    loadJobs();
                    break;
                case 'scheduling':
                    loadScheduling();
                    break;
                case 'inventory':
                    loadInventory();
                    break;
                case 'invoices':
                    loadInvoices();
                    break;
                case 'calculator':
                    loadCalculator();
                    break;
                case 'reports':
                    loadReports();
                    break;
            }
        }

        // Dashboard Functions
        function loadDashboard() {
            updateStats();
            loadTodaySchedule();
            loadRecentJobs();
            loadNewCustomers();
        }

        function updateStats() {
            document.getElementById('total-customers').textContent = customers.length;
            document.getElementById('active-jobs').textContent = jobs.filter(j => j.status !== 'completed').length;
            document.getElementById('monthly-revenue').textContent = '$' + invoices.reduce((sum, inv) => sum + inv.amount, 0).toLocaleString();
            document.getElementById('satisfaction-rate').textContent = '98%';
        }

        function loadTodaySchedule() {
            const today = new Date().toISOString().split('T')[0];
            const todayJobs = jobs.filter(job => job.date === today);
            const scheduleDiv = document.getElementById('today-schedule');
            
            if (todayJobs.length === 0) {
                scheduleDiv.innerHTML = '<p>No jobs scheduled for today</p>';
            } else {
                scheduleDiv.innerHTML = todayJobs.map(job => `
                    <div style="padding: 10px; border-left: 3px solid #667eea; margin: 10px 0; background: #f8f9fa;">
                        <strong>${job.customer}</strong> - ${job.serviceType}<br>
                        <small>Status: ${job.status} | Tech: ${job.technician}</small>
                    </div>
                `).join('');
            }
        }

        function loadRecentJobs() {
            const recentJobsDiv = document.getElementById('recent-jobs');
            const recentJobs = jobs.slice(0, 5);
            
            recentJobsDiv.innerHTML = recentJobs.map(job => `
                <div style="padding: 10px; border-left: 3px solid #28a745; margin: 10px 0; background: #f8f9fa;">
                    <strong>${job.customer}</strong> - ${job.serviceType}<br>
                    <small>${job.date} | $${job.amount} | ${job.status}</small>
                </div>
            `).join('');
        }

        function loadNewCustomers() {
            const newCustomersDiv = document.getElementById('new-customers');
            const newCustomers = customers.slice(0, 5);
            
            newCustomersDiv.innerHTML = newCustomers.map(customer => `
                <div style="padding: 10px; border-left: 3px solid #17a2b8; margin: 10px 0; background: #f8f9fa;">
                    <strong>${customer.name}</strong><br>
                    <small>${customer.equipment} | Last Service: ${customer.lastService}</small>
                </div>
            `).join('');
        }

        // Customers Functions
        function loadCustomers() {
            const tableBody = document.getElementById('customers-table');
            tableBody.innerHTML = customers.map(customer => `
                <tr>
                    <td>${customer.name}</td>
                    <td>${customer.email}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.address}</td>
                    <td>${customer.equipment}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="editCustomer(${customer.id})">Edit</button>
                        <button class="btn btn-secondary" onclick="viewCustomerHistory(${customer.id})">History</button>
                    </td>
                </tr>
            `).join('');
        }

        function showAddCustomerModal() {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <h3>Add New Customer</h3>
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="new-customer-name" placeholder="John Smith">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="new-customer-email" placeholder="john@email.com">
                </div>
                <div class="form-group">
                    <label>Phone:</label>
                    <input type="tel" id="new-customer-phone" placeholder="555-0101">
                </div>
                <div class="form-group">
                    <label>Address:</label>
                    <input type="text" id="new-customer-address" placeholder="123 Main St">
                </div>
                <div class="form-group">
                    <label>Equipment:</label>
                    <input type="text" id="new-customer-equipment" placeholder="AC Unit Model">
                </div>
                <button class="btn btn-success" onclick="addCustomer()">Add Customer</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addCustomer() {
            const newCustomer = {
                id: customers.length + 1,
                name: document.getElementById('new-customer-name').value,
                email: document.getElementById('new-customer-email').value,
                phone: document.getElementById('new-customer-phone').value,
                address: document.getElementById('new-customer-address').value,
                equipment: document.getElementById('new-customer-equipment').value,
                lastService: new Date().toISOString().split('T')[0]
            };
            
            customers.push(newCustomer);
            localStorage.setItem('customers', JSON.stringify(customers));
            loadCustomers();
            closeModal();
            showAlert('Customer added successfully!', 'success');
        }

        // Jobs Functions
        function loadJobs() {
            const tableBody = document.getElementById('jobs-table');
            const filter = document.getElementById('job-filter').value;
            let filteredJobs = filter === 'all' ? jobs : jobs.filter(job => job.status === filter);
            
            tableBody.innerHTML = filteredJobs.map(job => `
                <tr>
                    <td>#${job.id}</td>
                    <td>${job.customer}</td>
                    <td>${job.serviceType}</td>
                    <td>${job.date}</td>
                    <td><span class="status-badge status-${job.status}">${job.status}</span></td>
                    <td>$${job.amount}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="editJob(${job.id})">Edit</button>
                        <button class="btn btn-secondary" onclick="viewJobDetails(${job.id})">Details</button>
                    </td>
                </tr>
            `).join('');
        }

        function showAddJobModal() {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <h3>Add New Job</h3>
                <div class="form-group">
                    <label>Customer:</label>
                    <select id="new-job-customer">
                        ${customers.map(c => `<option value="${c.name}">${c.name}</option>`).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label>Service Type:</label>
                    <input type="text" id="new-job-service" placeholder="AC Repair">
                </div>
                <div class="form-group">
                    <label>Date:</label>
                    <input type="date" id="new-job-date">
                </div>
                <div class="form-group">
                    <label>Amount:</label>
                    <input type="number" id="new-job-amount" placeholder="250">
                </div>
                <div class="form-group">
                    <label>Technician:</label>
                    <input type="text" id="new-job-tech" placeholder="Mike">
                </div>
                <button class="btn btn-success" onclick="addJob()">Add Job</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addJob() {
            const newJob = {
                id: jobs.length + 1,
                customer: document.getElementById('new-job-customer').value,
                serviceType: document.getElementById('new-job-service').value,
                date: document.getElementById('new-job-date').value,
                amount: parseFloat(document.getElementById('new-job-amount').value),
                status: 'scheduled',
                technician: document.getElementById('new-job-tech').value
            };
            
            jobs.push(newJob);
            localStorage.setItem('jobs', JSON.stringify(jobs));
            loadJobs();
            closeModal();
            showAlert('Job added successfully!', 'success');
        }

        // Inventory Functions
        function loadInventory() {
            const tableBody = document.getElementById('inventory-table');
            const filter = document.getElementById('inventory-filter').value;
            let filteredItems = filter === 'all' ? inventory : inventory.filter(item => item.category === filter);
            
            tableBody.innerHTML = filteredItems.map(item => `
                <tr>
                    <td>${item.name}</td>
                    <td>${item.sku}</td>
                    <td>${item.category}</td>
                    <td>${item.quantity}</td>
                    <td>${item.minLevel}</td>
                    <td>$${item.price}</td>
                    <td><span class="status-badge status-${item.status}">${item.status}</span></td>
                    <td>
                        <button class="btn btn-secondary" onclick="adjustInventory(${item.id})">Adjust</button>
                    </td>
                </tr>
            `).join('');
        }

        function showAddInventoryModal() {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <h3>Add Inventory Item</h3>
                <div class="form-group">
                    <label>Item Name:</label>
                    <input type="text" id="new-item-name" placeholder="R-410A Refrigerant">
                </div>
                <div class="form-group">
                    <label>SKU:</label>
                    <input type="text" id="new-item-sku" placeholder="R410A-25">
                </div>
                <div class="form-group">
                    <label>Category:</label>
                    <select id="new-item-category">
                        <option value="refrigerant">Refrigerant</option>
                        <option value="parts">Parts</option>
                        <option value="tools">Tools</option>
                        <option value="consumables">Consumables</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity:</label>
                    <input type="number" id="new-item-quantity" placeholder="50">
                </div>
                <div class="form-group">
                    <label>Min Level:</label>
                    <input type="number" id="new-item-minlevel" placeholder="10">
                </div>
                <div class="form-group">
                    <label>Price:</label>
                    <input type="number" id="new-item-price" placeholder="150">
                </div>
                <button class="btn btn-success" onclick="addInventory()">Add Item</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function addInventory() {
            const newItem = {
                id: inventory.length + 1,
                name: document.getElementById('new-item-name').value,
                sku: document.getElementById('new-item-sku').value,
                category: document.getElementById('new-item-category').value,
                quantity: parseInt(document.getElementById('new-item-quantity').value),
                minLevel: parseInt(document.getElementById('new-item-minlevel').value),
                price: parseFloat(document.getElementById('new-item-price').value),
                status: 'good'
            };
            
            inventory.push(newItem);
            localStorage.setItem('inventory', JSON.stringify(inventory));
            loadInventory();
            closeModal();
            showAlert('Inventory item added successfully!', 'success');
        }

        // Invoice Functions
        function loadInvoices() {
            const tableBody = document.getElementById('invoices-table');
            const filter = document.getElementById('invoice-filter').value;
            let filteredInvoices = filter === 'all' ? invoices : invoices.filter(inv => inv.status === filter);
            
            tableBody.innerHTML = filteredInvoices.map(invoice => `
                <tr>
                    <td>#${invoice.id}</td>
                    <td>${invoice.customer}</td>
                    <td>${invoice.date}</td>
                    <td>$${invoice.amount}</td>
                    <td><span class="status-badge status-${invoice.status}">${invoice.status}</span></td>
                    <td>
                        <button class="btn btn-secondary" onclick="viewInvoice(${invoice.id})">View</button>
                        <button class="btn btn-success" onclick="sendInvoice(${invoice.id})">Send</button>
                    </td>
                </tr>
            `).join('');
        }

        function showCreateInvoiceModal() {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <h3>Create Invoice</h3>
                <div class="form-group">
                    <label>Customer:</label>
                    <select id="invoice-customer">
                        ${customers.map(c => `<option value="${c.name}">${c.name}</option>`).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label>Service Description:</label>
                    <textarea id="invoice-description" rows="3" placeholder="AC Repair Service"></textarea>
                </div>
                <div class="form-group">
                    <label>Amount:</label>
                    <input type="number" id="invoice-amount" placeholder="250">
                </div>
                <button class="btn btn-success" onclick="createInvoice()">Create Invoice</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function createInvoice() {
            const newInvoice = {
                id: invoices.length + 1,
                customer: document.getElementById('invoice-customer').value,
                date: new Date().toISOString().split('T')[0],
                amount: parseFloat(document.getElementById('invoice-amount').value),
                status: 'draft'
            };
            
            invoices.push(newInvoice);
            localStorage.setItem('invoices', JSON.stringify(invoices));
            loadInvoices();
            closeModal();
            showAlert('Invoice created successfully!', 'success');
        }

        // Calculator Functions
        function loadCalculator() {
            // Calculator loads the external HVAC calculator
        }

        function quickCalc(type) {
            window.open('hvac-calculator.html', '_blank');
        }

        // Report Functions
        function loadReports() {
            // Reports functionality
        }

        function generateReport(type) {
            showAlert(`${type.charAt(0).toUpperCase() + type.slice(1)} report generated successfully!`, 'success');
        }

        // Utility Functions
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            document.body.insertBefore(alertDiv, document.body.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        function exportCustomers() {
            const data = JSON.stringify(customers, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'customers.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportJobs() {
            const data = JSON.stringify(jobs, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'jobs.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportInventory() {
            const data = JSON.stringify(inventory, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'inventory.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportInvoices() {
            const data = JSON.stringify(invoices, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'invoices.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Filter Functions
        function filterJobs() {
            loadJobs();
        }

        function filterInventory() {
            loadInventory();
        }

        function filterInvoices() {
            loadInvoices();
        }

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ServicePro Elite - Initializing...');
            
            // Load data from localStorage if available
            const savedCustomers = localStorage.getItem('customers');
            const savedJobs = localStorage.getItem('jobs');
            const savedInventory = localStorage.getItem('inventory');
            const savedInvoices = localStorage.getItem('invoices');
            
            if (savedCustomers) customers = JSON.parse(savedCustomers);
            if (savedJobs) jobs = JSON.parse(savedJobs);
            if (savedInventory) inventory = JSON.parse(savedInventory);
            if (savedInvoices) invoices = JSON.parse(savedInvoices);
            
            // Load dashboard by default
            loadDashboard();
            
            console.log('ServicePro Elite - Ready for production!');
        });
    </script>
</body>
</html>